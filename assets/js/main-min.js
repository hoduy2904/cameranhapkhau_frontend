$((function(){$(".banner").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",prevArrow:'<div class="prev"><i class="icon arrow-left-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/></svg></i></div>',nextArrow:'<div class="next"><i class="icon arrow-right-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></i></div>'}),$(".slide-lazy").slick({lazyLoad:"ondemand",slidesToShow:5,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,prevArrow:'<div class="prev"><i class="icon arrow-left-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/></svg></i></div>',nextArrow:'<div class="next"><i class="icon arrow-right-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></i></div>',responsive:[{breakpoint:1042,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:1}}]}),$(".flash-sale__products").slick({lazyLoad:"ondemand",slidesToShow:5,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,prevArrow:'<div class="prev"><i class="icon arrow-left-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/></svg></i></div>',nextArrow:'<div class="next"><i class="icon arrow-right-icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></i></div>',responsive:[{breakpoint:1042,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}}]}),$(".nav-item .icon").on("click",(function(t){$(this).parent().toggleClass("active"),$(this).parent().children(".dropdown-menu").slideToggle()})),$(".mobile-menu").on("click",(function(){$(".sidebar-mobile").addClass("show")})),$(".close-menu").on("click",(function(){$(".sidebar-mobile").removeClass("show")})),$(".image-product").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".sub-image__product"}),$(".sub-image__product").slick({slidesToShow:4,slidesToScroll:1,asNavFor:".image-product",dots:!0,centerMode:!1,focusOnSelect:!0});const options={root:null,rootMargin:"0px",threshold:0};let obcallBack=(t,e)=>{t.forEach((t=>{t.isIntersecting&&(t.target.src=t.target.dataset.src,e.unobserve(t.target))}))};const observer=new IntersectionObserver(obcallBack,options);document.querySelectorAll(".lazy-img").forEach((t=>{observer.observe(t)})),$(".tab-item").on("click",(function(){$(".tab-item").removeClass("active"),$(this).addClass("active");let t=$(this).attr("data-tab");$(".tab-content").removeClass("active"),$(`#${t}`).addClass("active")})),$("#btnTracking").on("click",(function(){$(".tracking-result").slideToggle()})),$(".form-check-input").on("click",(function(){$(this).is(":checked")?$(".form-VAT").show("slide"):$(".form-VAT").hide("slide")})),$(".add-to-cart").on("click",(function(t){t.preventDefault();let e=$(this).attr("data-id");if("product"==$(this).attr("data-type"))var s=$("input[name=option-price]:checked").val()??1,r=$("input[name=color]:checked").attr("id");addCart(e,s,r)})),$(".buy-now").on("click",(function(t){t.preventDefault();let e=$(this).attr("data-id");var s=$("input[name=option-price]:checked").val()??1,r=$("input[name=color]:checked").attr("id");addCart(e,s,r,!0)}));let addCart=function(id,number=1,colorId=null,redirect=!1){$.ajax({url:"/api/cart/add",method:"POST",data:{id:id,number:number,colorId:colorId},success:function(t){200==t.status?(showToast("Thêm giỏ hàng thành công"),$("#cartCount").html(t.count),redirect&&(window.location.href="/gio-hang")):showToast(t.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");showToast(err.message,"error")}})};function deleteCart(id){let isSuccess=!1;return $.ajax({url:"/api/cart/delete",method:"DELETE",data:{id:id},async:!1,success:function(t){200==t.status?(showToast("Xóa thành công"),$("#cartCount").html(t.count),isSuccess=!0):(showToast(t.message),isSuccess=!1)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");showToast(err.message,"error"),isSuccess=!1}}),isSuccess}function editCart(id,number){let isSuccess=!1;return $.ajax({url:"/api/cart/update",method:"PUT",data:{id:id,number:number},async:!1,success:function(t){200==t.status?(showToast("Cập nhật thành công"),isSuccess=!0):isSuccess=!1},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");showToast(err.message,"error"),isSuccess=!1}}),isSuccess}function showToast(t,e){let s="toast-default";switch(e){case"error":s="toast-error";break;case"success":s="toast-success";break;case"warning":s="toast-warning";break;default:break}Toastify({text:t,className:s,close:!0,offset:{x:50,y:10}}).showToast()}function totalCartMoney(){let t=0;$(".moneyCartItem").each(((e,s)=>{let r=parseInt($(s).html().replaceAll(",",""))??0;t+=r})),$("#totalCartMoney").html(t.toLocaleString("vi-VN").replaceAll(".",","))}function onChangeInput(t){var e,s=$(".qty-minus"),r=$(".qty-plus");if(void 0!==s&&void 0!==r&&null!==s&&null!==r){s.on("click",(function(s){e=$($(this).parent().children(".qty"));var r=Number(e.attr("min")),i=Number(e.attr("step")),o=Number(e.val()),a=o-i;a<r&&(a=r),e.val(Number(a)),s.preventDefault(),null!=e&&null!=e&&t(e,a,o)})),r.on("click",(function(s){e=$($(this).parent().children(".qty")),Number(e.attr("min"));var r=Number(e.attr("step")),i=Number(e.val()),o=i+r;e.val(Number(o)),s.preventDefault(),null!=e&&null!=e&&t(e,o,i)}))}}$(".filter-item .category-title").on("click",(function(){$(this).parent(".filter-item").children(".filter-content").is(":hidden")?$(this).children(".end-icon").html("-"):$(this).children(".end-icon").html("+"),$(this).parent(".filter-item").children(".filter-content").slideToggle()})),$(".filters-title .xmark-icon").on("click",(function(){$(".filters").removeClass("active")})),$("#open-filter").on("click",(function(t){t.preventDefault(),$(".filters").toggleClass("active")})),$(".btn-trash-cart").on("click",(function(t){let e=$(this).parent("tr");deleteCart(e.attr("id"))&&e.remove()})),onChangeInput(((t,e,s)=>{let r=$(t).parents("tr");if(editCart(r.attr("id"),e)){let t=r.children("td:nth-child(4)").attr("data-price");r.children("td:nth-child(5)").html((t*e).toLocaleString("vi-VN").replaceAll(".",",")),totalCartMoney()}else $(t).parent().children(".qty").val(s)})),$(".qty").on("focusin",(function(){$(this).data("prevVal",$(this).val())})),$(".qty").on("change",(function(){let t=$(this).val(),e=$(this).parents("tr");if(editCart(e.attr("id"),t)){let s=e.children("td:nth-child(4)").attr("data-price");e.children("td:nth-child(5)").html((s*t).toLocaleString("vi-VN").replaceAll(".",",")),totalCartMoney()}else{let t=$(this).data("prevVal");$(this).val(t)}}))}));